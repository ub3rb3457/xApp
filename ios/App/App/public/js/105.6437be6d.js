"use strict";(self["webpackChunkPetBoutique"]=self["webpackChunkPetBoutique"]||[]).push([[105],{7318:(t,e,o)=>{o.d(e,{Z:()=>u});var a=o(2494),s=o(8825),l=o(514),n=o(2490);const r={props:{uid:String},setup(t){const e=t,o=n.storage.ref();var r=0;const i=(0,s.Z)(),c=n.firebase.functions().httpsCallable("addPetPhoto"),d=async()=>{const t=await l.V1.getPhoto({quality:90,allowEditing:!0,width:300,height:300,resultType:l.dk.DataUrl}),a=t.dataUrl,s="pets/"+e.uid+".jpeg";var d=o.child(s).putString(a,"data_url");d.on("state_changed",(t=>{switch(i.loading.show({delay:400}),r=t.bytesTransferred/t.totalBytes*100,console.log("Upload is "+r+"% done"),t.state){case n.firebase.storage.TaskState.PAUSED:console.log("Upload is paused");break;case n.firebase.storage.TaskState.RUNNING:console.log("Upload is running");break}}),(t=>{i.loading.hide(),console.error("Error during upload:",t)}),(()=>{i.loading.hide(),console.log("Upload is complete"),o.child(s).getDownloadURL().then((t=>{c({uid:e.uid,photoURL:t}),console.log(t)})).catch((t=>{}))}))};return(t,e)=>{const o=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.j4)(o,{fab:"",color:"primary",icon:"camera",padding:"sm",class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"},onClick:d})}}};var i=o(8240),c=o(7518),d=o.n(c);const u=r;d()(r,"components",{QBtn:i.Z})},5105:(t,e,o)=>{o.r(e),o.d(e,{default:()=>u});var a=o(9682),s=o(2494),l=o(2490),n=o(486),r=o(7874),i=o(9582),c=o(7318);const d={setup(t){const e=(0,r.oR)(),o=(0,i.tv)();let d=(0,a.Fl)((()=>e.state.auth.user)),u=(0,a.Fl)((()=>e.state.auth.isAuthenticated));u.value||o.push("/login");(0,n.C)(l.db.collection("users").doc(d.value.uid).collection("pets"));return(t,e)=>((0,s.wg)(),(0,s.j4)(c.Z))}},u=d}}]);